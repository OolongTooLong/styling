/*!
 * fullpage.js Drag And Move Extension 0.0.3
 * https://github.com/alvarotrigo/fullPage.js
 *
 * This code has been bought from www.alvarotrigo.com/fullPage/extensions/ and it is not free to use or distribute.
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(n){window.fp_dragAndMoveExtension=function(){function o(){M.isAnimating&&(r(),t(),h()),window.requestAnimFrame(o)}function e(){"fingersonly"!==A.dragAndMove&&n(window).on("mousedown MouseDownHandler",f)}function t(){return tn?(ln||(ln=Y),R=ln<Y?"up":ln>Y?"down":"none",ln=Y):(un||(un=O),R=un<O?"left":un>O?"right":"none",un=O),R}function r(){a(),l();var o=tn?U:W;!M.isGrabbing&&o<0&&S.scrollHandler(),tn?(_*=N,U+=_,n(x).trigger("onScroll")):(J*=N,W+=J),M.isGrabbing||en||i(o)}function i(n){var o=tn?U:W;Math.round(100*o)==Math.round(100*n)&&Q++,Q>2&&(M.isAnimating=!1)}function a(){var n,o;tn?(n=S.getDestinationPosition(X),o=U):X.length&&(n=X.position().left,o=W);var e=X.length?n*-1-o:0,t=e*K;s(t)}function s(n){tn?_+=n:J+=n}function l(){if(M.isGrabbing){var n,o;tn?(n=Z-U,o=n-_):(n=$-W,o=n-J),s(o)}}function u(o){n(window).off("mousemove MouseMoveHandler",g),n(window).off("mouseup",u);var e=tn?n(window).height():n(window).width(),t=R===V;if((rn<30||rn<e/2&&!t)&&(X=tn?n(H):n(H).find(q)),!tn&&X&&M.isGrabbing&&M.isAnimating){var r=I.find(E);r.length&&S.landscapeScroll(r,X,V)}if(n(x).trigger("onGrab",[!1]),M.isGrabbing=!1,en=!1,ln=0,un=0,!j)if(tn){var i={up:n(H).prev().length?X.next():n(H),down:n(H).next().length?X.prev():n(H)};"none"!==V&&i[V].find(F).length&&S.silentLandscapeScroll(i[V].find(q),"internal")}else S.silentScroll(S.getDestinationPosition(n(H)))}function c(o){var e=o.originalEvent;if(Q=0,en=!0,L=(new Date).getTime(),S.isReallyTouch(e)){var t=S.getEventsPage(e);an=t.y,sn=t.x,nn=M.getCurrentScroll(),on=M.getCurrentScrollSlides(e);var r=S.getMSPointer();n(window).on("touchmove "+r.move,g),n(window).on("touchend",u)}}function f(o){j=Q,Q=0,en=!0,L=(new Date).getTime(),an=d(o,"y"),sn=d(o,"x"),nn=M.getCurrentScroll(),on=M.getCurrentScrollSlides(o),g(o),n(window).on("mousemove MouseMoveHandler",g),n(window).on("mouseup",u)}function d(n,o){var e="x"===o;if(S.isTouch&&S.isReallyTouch(n)){var t=S.getEventsPage(n);return e?t.x:t.y}return e?n.pageX:A.scrollBar||!A.autoScrolling?n.screenY:n.pageY}function g(o){var e,t,r=o.originalEvent;t=d(r,"x"),e=d(r,"y");var i=e-an,a=t-sn;if(!(Math.abs(i)<5&&Math.abs(a)<5||Math.abs(i)<5&&Math.abs(i)>Math.abs(a)||Math.abs(a)<5&&Math.abs(a)>Math.abs(i))){en&&(M.isGrabbing||(tn=Math.abs(i)>Math.abs(a),S.removeAnimation(n(x)),S.removeAnimation(I.find(z))),n(x).trigger("onGrab",[!0]),M.isGrabbing=!0);var s={up:n(H).prev(),down:n(H).next(),left:n(r.target).closest(C).find(q).prev(),right:n(r.target).closest(C).find(q).next(),none:n(H)};M.isGrabbing&&(U=M.getCurrentScroll(),W=M.getCurrentScrollSlides(r),O=t,Y=e,V=v(t,e),X=s[V],X=w(X,V),M.isAnimating="vertical"!==A.dragAndMove&&"horizontal"!==A.dragAndMove||"vertical"===A.dragAndMove&&tn||"horizontal"===A.dragAndMove&&!tn,M.isAnimating=M.isAnimating&&S.isScrollAllowed.m[V]),Z=nn+i,$=on+a,M.isAnimating&&r.preventDefault()}}function v(n,o){var e=tn?an:sn,t=tn?o:n;return rn=Math.abs(e-t),e>t?tn?"down":"right":e<t?tn?"up":"left":"none"}function w(o,e){return o.length?o:tn?n(H):I.find(q)}function h(){var o=tn?n(x):I.find(z);if(A.css3&&(!tn||tn&&A.autoScrolling&&!A.scrollBar)){var e=tn?"translate3d(0px, "+Math.round(U)+"px, 0px)":"translate3d("+Math.round(W)+"px, 0px, 0px)";o.css(S.getTransforms(e))}else A.autoScrolling&&!A.scrollBar&&tn?o.css("top",Math.round(U)):tn?n(window).scrollTop(Math.round(-U)):o.closest(E).scrollLeft(-1*Math.round(W))}function m(){var o=["continuousHorizontal","continuousVertical"];n.each(o,function(n,o){A[o]&&(A[o]=!1,p("error","The option `"+o+"` is not compatible with `dragAndDrop`; `"+o+"` desactivated."))}),A.scrollOverflow&&p("warn","The option `scrollOverflow` is not fully compatible with `dragAndDrop`; Scrolling sections/slides will not work when dragging")}function p(n,o){console&&console[n]&&console[n]("fullPage: "+o)}var M=this,b=n.fn.fullpage.getFullpageData(),A=b.options,S=b.internals,y="fullpage-wrapper",x="."+y,T="active",D="."+T,G="fp-section",C="."+G,H=C+D,P="fp-slide",F="."+P,q=F+D,B="fp-slides",E="."+B,k="fp-slidesContainer",z="."+k;M.isGrabbing=!1,M.isAnimating=!1;var R,I,L,O,Y,j,Q=0,V=null,X=null,_=0,J=0,K=.05,N=.7,U=0,W=0,Z=0,$=0,nn=0,on=0,en=!1,tn=!1,rn=0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),M.init=function(n){return A.fitToSection=!1,m(),e(),o(),M},M.turnOffTouch=function(){if("mouseonly"!==A.dragAndMove){var o=S.getMSPointer();n(x).off("touchstart "+o.down).off("touchmove "+o.move),"mouseonly"!==A.dragAndMove&&n(x).on("touchstart "+o.down,c)}};var an,sn,ln=0,un=0;M.getCurrentScroll=function(){if(!A.css3||!A.autoScrolling||A.scrollBar)return A.autoScrolling&&!A.scrollBar?parseInt(n(x).css("top")):-n(window).scrollTop();var o=n(x).css("transform");return o="undefined"==typeof o?n(x).css("-webkit-transform"):o,"undefined"!=typeof o?parseInt(o.split(",")[5]):void 0},M.getCurrentScrollSlides=function(o){var e=n(o.target).closest(C);I=e.length?e:I,"undefined"==typeof I&&(I=n(H));var t=I.find(E);if(t.length){var r=t.find(z);if(!A.css3)return-t.scrollLeft();var i=r.css("transform");if(i="undefined"==typeof i?n(x).css("-webkit-transform"):i,"undefined"!=typeof i)return"none"===i?0:parseInt(i.split(",")[4])}return 0},M.getDocumentHeight=function(){var o=0,e=n(C).length;return n(C).each(function(t){t!==e&&(o+=n(this).height())}),o},M.destroy=function(){var o=S.getMSPointer();n(x).off("touchstart "+o.down).off("touchmove "+o.move).off("touchend"),n(window).off("mousedown MouseDownHandler").off("mousemove MouseMoveHandler").off("mouseup")};var cn;M.isScrollingDown=function(){return!tn&&cn?cn:cn="down"===V},M.c=S.c;var fn=M["common".charAt(0)];return"complete"===document.readyState&&fn("dragAndMove"),n(window).on("load",function(){fn("dragAndMove")}),M}}(jQuery);